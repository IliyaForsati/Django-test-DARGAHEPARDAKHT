jQuery(document).ready(function($){$('.talar-slider-message').lightSlider({item:4,loop:true,slideMove:1,pager:true,easing:'cubic-bezier(0.25, 0, 0.25, 1)',speed:600,centerSlide:true,auto:true,currentPagerPosition:'middle',responsive:[{breakpoint:800,settings:{item:3,slideMove:1,slideMargin:6,}},{breakpoint:480,settings:{item:2,slideMove:1}}]});if($(window).width()<768){$('.flex-hamdeli-create-account').insertAfter('button[type="submit"]');}$(".dopay").on("click",function(e){var id=$(this).attr("data-id");var type_talar=$(this).attr("data-type");$(this).html('<span class="elspinner"></span>درحال ذخیره سازی');e.preventDefault();var data={action:'upload_talar',id:id,type:type_talar};$.post(the_in_url.in_url,data,function(response){var res=$.parseJSON(response);if(res.status==201){alert(res.error)}if(res.status==200){$("#gotopay").submit();}});});$(".talar-tarakonesh-ul").on("click",".copy-icon",function(){copyText=$(this).attr("data-l");copyToClipboard(copyText);var tooltip=$("#myTooltip");tooltip.html("کپی شد : "+copyText);});$(".copy-icon").mouseout(function(){var tooltip=$("#myTooltip");tooltip.innerHTML="برای کپی لینک کلیک کنید ";});function copyToClipboard(text){var selected=false;var el=document.createElement('textarea');el.value=text;el.setAttribute('readonly','');el.style.position='absolute';el.style.left='-9999px';document.body.appendChild(el);if(document.getSelection().rangeCount>0){selected=document.getSelection().getRangeAt(0)}el.select();document.execCommand('copy');document.body.removeChild(el);if(selected){document.getSelection().removeAllRanges();document.getSelection().addRange(selected);}};$(".rank-label").click(function(){var id=$(this).attr("id");var item=$(this).attr("item");var rank=Number($(this).attr("value"));var c=rank+1;$(".rank-label").removeClass("active");$(this).addClass("active");var data={action:'save_rank',id:id,item:item,rank:rank};$.post(the_in_url.in_url,data,function(response){var res=$.parseJSON(response);$(".moshahedeh-talar").removeClass("disactive");alert("با تشکر نظر شما ثبت شد ");});})
function digits(price){return price.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,");}function change_time_validate(){var check=$('.time-validate:checked');var p=check.attr("p");$(".pricetalar").val(digits(""+p));priceshow();}function priceshow(){var donated=Number($(".donated").val().replaceAll(",",""));var pricetalar=Number($(".pricetalar").val().replaceAll(",",""));var sum=pricetalar+donated;$(".priceshow").text(digits(""+sum));}$(".pricetalar,.donated").change(function(){priceshow();});$(".donated").on('change',function(){var price=$(this).val().replaceAll(",","");$(this).val(digits(""+price));});if($(".time-validate").length>0){change_time_validate();}$(".time-validate").change(function(){change_time_validate();})
$(".birth-death-date").pDatepicker({initialValueType:"gregorian",format:"YYYY/MM/DD",onSelect:"year",initialValue:false,maxDate:new persianDate()});$(".funeral-ceremony-date").pDatepicker({initialValueType:"gregorian",format:"YYYY/MM/DD",onSelect:"year",initialValue:false,minDate:new persianDate()});$(".talar-date").pDatepicker({initialValueType:"gregorian",format:"YYYY/MM/DD",onSelect:"year",initialValue:false,});$(".max-date").pDatepicker({initialValueType:"gregorian",format:"YYYY/MM/DD",onSelect:"year",initialValue:false,});$("#_talar-run-celebration,#ـtalar-ezdevaj-date").pDatepicker({initialValueType:"gregorian",format:"YYYY/MM/DD",onSelect:"year",initialValue:false,minDate:new persianDate().add('day',0).valueOf(),});$("#talar-type-tavalod").on('click',function(){if($(this).prop('checked')){$("#ezdevaj-row").slideUp();$("#tavalod-row").slideDown();}})
$("#talar-type-ezdevaj").on('click',function(){if($(this).prop('checked')){$("#tavalod-row").slideUp();$("#ezdevaj-row").slideDown();}})
$("#talar-ezdevaj-type").on('change',function(){if($("#salgard-option").prop('selected')){$("#salgard").slideDown();}else{$("#salgard").slideUp();}})
$("#more-price").on('click',function(){if($(this).prop('checked')){$("#more-price-block").slideDown();}else{$("#more-price-block").slideUp();$(".donated").val("");priceshow();}})
const errorElement=document.getElementById('error');$("#talar-form").submit(function(e){const talarPriceInput=$('#talar-price-input');const myPrice=$("#my-price");const justNumber=/^[0-9]+$/;let messages=[]
if(!$("#talar-type-tavalod").prop('checked')&&!$("#talar-type-ezdevaj").prop('checked')){messages.push('<span class="notice notice-error">نوع تالار را انتخاب کنید</span>');}if($("#talar-type-tavalod").prop('checked')){if($('#talar-tavalod-date').val()===''||$('#talar-tavalod-date').val()==null){messages.push('<span class="notice notice-error">تاریخ تولد را انتخاب کنید</span>');}}if($("#talar-type-ezdevaj").prop('checked')){if($(".talar-select").val()==='انتخاب کنید *'){messages.push('<span class="notice notice-error">نوع مراسم را انتخاب کنید</span>');}if($('#talar-ezdevaj-date').val()===''||$('#talar-ezdevaj-date').val()==null){messages.push('<span class="notice notice-error">تاریخ مراسم را انتخاب کنید</span>');}if($("#salgard-option").is(':selected')&&$("#ezdevaj-day").val()==0){messages.push('<span class="notice notice-error">سالگرد ازدواج وارد نشده است</span>');}}if(!$("#pub").prop('checked')&&!$("#pri").prop('checked')){messages.push('<span class="notice notice-error">خصوصی یا عمومی بودن تالار باید مشخص شود</span>');}if(!$("#time1w").prop('checked')&&!$("#time1m").prop('checked')&&!$("#time1y").prop('checked')){messages.push('<span class="notice notice-error">مدت زمان تالار را انتخاب کنید</span>');}if(talarPriceInput.val()===''||talarPriceInput.val()==null){messages.push('<span class="notice notice-error">مبلغ نهایی کمک به کودکان مبتلا به سرطان را وارد کنید</span>')}else if(!justNumber.test(talarPriceInput.val().replaceAll(",",""))){messages.push('<span class="notice notice-error">مقدار مبلغ نهایی کمک به کودکان مبتلا به سرطان صحیح نیست!</span>')}if($("#more-price").prop('checked')){if(myPrice.val()===''||myPrice.val()==null){messages.push('<span class="notice notice-error">مبلغ مورد نظر خود را وارد کنید</span>')}else if(Number(myPrice.val().replaceAll(",",""))<1){messages.push('<span class="notice notice-error">مقدار مبلغ مورد نظر صحیح نیست!</span>')}}if(messages.length>0){e.preventDefault();errorElement.innerHTML=messages.join('<br>');}else{}})
$("#run").on('click',function(){if($(this).prop('checked')){$(".display-off").slideDown();$(".comment-textarea.height").removeClass("height");}});$("#dont-run").on('click',function(){if($(this).prop('checked')){$(".display-off").slideUp();$(".comment-textarea").addClass("height");}});$("#talar-form-step2").submit(function(e){let messages=[]
if(!$("#run").prop('checked')&&!$("#dont-run").prop('checked')){messages.push('<span class="notice notice-error">مراسم حضوری مشخص نشده است</span>');}if($("#run").prop('checked')){if($('#talar-run-celebration').val()===''||$('#talar-run-celebration').val()==null){messages.push('<span class="notice notice-error">تاریخ برگزاری مراسم را انتخاب کنید</span>');}if($('#talar-start-time').val()===''||$('#talar-start-time').val()==null){messages.push('<span class="notice notice-error">ساعت شروع مراسم مشخص نشده است</span>');}if($('#talar-end-time').val()===''||$('#talar-end-time').val()==null){messages.push('<span class="notice notice-error">ساعت پایان مراسم مشخص نشده است</span>');}if($("#id_priv").val()==='استان'){messages.push('<span class="notice notice-error">استان مراسم را انتخاب کنید</span>');}if($("#id_city").val()==='شهر'){messages.push('<span class="notice notice-error">شهر مراسم را انتخاب کنید</span>');}if($('#talar-address').val()===''||$('#talar-address').val()==null){messages.push('<span class="notice notice-error">آدرس برگزاری مراسم را وارد کنید</span>');}}if($(".textinvitation").val().length>1000){messages.push('<span class="notice notice-error">متن دعوت بیشتر از 1000 کاراکتر است </span>');}if(messages.length>0){e.preventDefault();errorElement.innerHTML=messages.join('<br>');}else{}})
$("#talar-form-step3").submit(function(e){const nameValidation=/^[\u0600-\u06FF\s]+$/;const phoneNumber=/^(\+98|0)?9\d{9}$/;let messages=[]
if(!$(".talar-slider-input:checked").length>0){messages.push('<span class="notice notice-error">برای تالار جشن تصویری انتخاب کنید</span>');}if($('#nl-owner').val()===''||$('#nl-owner').val()==null){messages.push('<span class="notice notice-error">نام و نام خانوادگی ایجاد کننده تالار جشن وارد نشده است</span>');}else if(!nameValidation.test($("#nl-owner").val())){messages.push('<span class="notice notice-error">نام و نام خانوادگی ایجاد کننده تالار جشن استاندارد نیست</span>')}if($('#pn-owner').val()===''||$('#pn-owner').val()==null){messages.push('<span class="notice notice-error">شماره تلفن همراه ایجاد کننده تالار جشن وارد نشده است</span>');}else if(!phoneNumber.test($("#pn-owner").val())){messages.push('<span class="notice notice-error">فرمت شماره تلفن همراه صحیح نیست!</span>')}if($('#celebration-owner').val()===''||$('#celebration-owner').val()==null){messages.push('<span class="notice notice-error">نام و نام خانوادگی صاحب جشن وارد نشده است</span>');}else if(!nameValidation.test($("#celebration-owner").val())){messages.push('<span class="notice notice-error">نام و نام خانوادگی صاحب جشن استاندارد نیست</span>')}if(!$('.clip').is(':checked')){messages.push('<span class="notice notice-error">کلیپ مورد نظر را انتخاب کنید</span>');}if($("#damad").length>0){if($('#damad').val()===''||$('#damad').val()==null){messages.push('<span class="notice notice-error">نام و نام خانوادگی داماد را وارد کنید</span>');}else if(!nameValidation.test($('#damad').val())){messages.push('<span class="notice notice-error">نام و نام خانوادگی داماد استاندارد نیست</span>')}if($('#aroos').val()===''||$('#aroos').val()==null){messages.push('<span class="notice notice-error">نام و نام خانوادگی عروس را وارد کنید</span>');}else if(!nameValidation.test($('#aroos').val())){messages.push('<span class="notice notice-error">نام و نام خانوادگی عروس استاندارد نیست</span>')}}if(messages.length>0){e.preventDefault();errorElement.innerHTML=messages.join('<br>');}else{}});$('.talar-slider').lightSlider({item:1,pager:true,controls:true,loop:true,auto:true,centerSlide:true,pause:4000,pauseOnHover:true,});$("#talar-event").on('change',function(){if($("#salgard-event").prop('selected')){$(".new-spin").css('display','flex');}else{$(".new-spin").css('display','none');}})
$("#talar-form-sad").submit(function(e){const form=$("#talar-form-sad");const talarPriceInput=$('#talar-price-input');const myPrice=$("#my-price");const justNumber=/^[0-9]+$/;let messages=[]
if($("#talar-event").val()==='نوع رویداد *'){messages.push('<span class="notice notice-error">نوع رویداد را انتخاب کنید</span>');}if(!$("#run").prop('checked')&&!$("#dont-run").prop('checked')){messages.push('<span class="notice notice-error">مراسم حضوری مشخص نشده است</span>');}if($("#run").prop('checked')){if($('#talar-run-celebration').val()===''||$('#talar-run-celebration').val()==null){messages.push('<span class="notice notice-error">تاریخ برگزاری مراسم را انتخاب کنید</span>');}if($('#talar-start-time').val()===''||$('#talar-start-time').val()==null){messages.push('<span class="notice notice-error">ساعت شروع مراسم مشخص نشده است</span>');}if($('#talar-end-time').val()===''||$('#talar-end-time').val()==null){messages.push('<span class="notice notice-error">ساعت پایان مراسم مشخص نشده است</span>');}if($("#id_priv").val()==='استان'){messages.push('<span class="notice notice-error">استان مراسم را انتخاب کنید</span>');}if($("#id_city").val()==='شهر'){messages.push('<span class="notice notice-error">شهر مراسم را انتخاب کنید</span>');}if($('#talar-address').val()===''||$('#talar-address').val()==null){messages.push('<span class="notice notice-error">آدرس برگزاری مراسم را وارد کنید</span>');}}if(!$("#pub").prop('checked')&&!$("#pri").prop('checked')){messages.push('<span class="notice notice-error">خصوصی یا عمومی بودن تالار باید مشخص شود</span>');}if(!$("#time1w").prop('checked')&&!$("#time1m").prop('checked')&&!$("#time1y").prop('checked')){messages.push('<span class="notice notice-error">مدت زمان تالار را انتخاب کنید</span>');}if(talarPriceInput.val()===''||talarPriceInput.val()==null){messages.push('<span class="notice notice-error">مبلغ نهایی کمک به کودکان مبتلا به سرطان را وارد کنید</span>')}else if(!justNumber.test(talarPriceInput.val().replaceAll(",",""))){messages.push('<span class="notice notice-error">مقدار مبلغ نهایی کمک به کودکان مبتلا به سرطان صحیح نیست!</span>')}if($("#more-price").prop('checked')){if(myPrice.val()===''||myPrice.val()==null){messages.push('<span class="notice notice-error">مبلغ مورد نظر خود را وارد کنید</span>')}else if(Number(myPrice.val().replaceAll(",",""))<1){messages.push('<span class="notice notice-error">مقدار مبلغ مورد نظر صحیح نیست!</span>')}}if($(".textinvitation").val().length>1000){messages.push('<span class="notice notice-error">متن دعوت بیشتر از 1000 کاراکتر است </span>');}if(messages.length>0){e.preventDefault();errorElement.innerHTML=messages.join('<br>');}else{}});if($("#salgard-day").length>0){var num2=$("#salgard-day");var perNum2=['0','اولین','دومین','سومین','چهارمین','پنجمین','ششمین','هفتمین','هشتمین','نهمین','دهمین','یازدهمین','دوازدهمین','سیزدهمین','چهاردهمین','پانزدهمین','شانزدهمین','هفدهمین','هجدهمین','نوزدهمین','بیستمین'];var resNum=perNum2[num2.val()];document.getElementById("result-spin").innerHTML=resNum;$(".FormUnit-quantity").on('click',function(){var resNum=perNum2[num2.val()];document.getElementById("result-spin").innerHTML=resNum;});}$("#talar-form-sad2").submit(function(e){const form=$("#talar-form-sad2");const nameValidation=/^[\u0600-\u06FF\s]+$/;const phoneNumber=/^(\+98|0)?9\d{9}$/;let messages=[]
if(!$("#marhoom-khanom").prop('checked')&&!$("#marhoom-agha").prop('checked')){messages.push('<span class="notice notice-error">جنسیت مرحوم مشخص نشده است</span>');}if(!$(".talar-slider-input:checked").length>0){messages.push('<span class="notice notice-error">برای تالار سوگ تصویری انتخاب کنید</span>');}if($('#nl-owner').val()===''||$('#nl-owner').val()==null){messages.push('<span class="notice notice-error">نام و نام خانوادگی عزیز از دست رفته وارد نشده است</span>');}else if(!nameValidation.test($("#nl-owner").val())){messages.push('<span class="notice notice-error">نام و نام خانوادگی عزیز از دست رفته استاندارد نیست</span>')}if($('#tavalod').val()===''||$('#tavalod').val()==null){messages.push('<span class="notice notice-error">تاریخ تولد را انتخاب کنید</span>');}if($('#fot').val()===''||$('#fot').val()==null){messages.push('<span class="notice notice-error">تاریخ فوت را انتخاب کنید</span>');}if(!$('.clip').is(':checked')){messages.push('<span class="notice notice-error">کلیپ مورد نظر را انتخاب کنید</span>');}if(messages.length>0){e.preventDefault();errorElement.innerHTML=messages.join('<br>');}else{}});$("#talar-form-sad3").submit(function(e){const form=$("#talar-form-sad3");const nameValidation=/^[\u0600-\u06FF\s]+$/;const phoneNumber=/^(\+98|0)?9\d{9}$/;let messages=[]
if($('#nl-owner').val()===''||$('#nl-owner').val()==null){messages.push('<span class="notice notice-error">نام و نام خانوادگی ایجاد کننده تالار سوگ وارد نشده است</span>');}else if(!nameValidation.test($("#nl-owner").val())){messages.push('<span class="notice notice-error">نام و نام خانوادگی ایجاد کننده تالار سوگ استاندارد نیست</span>')}if($('#pn-owner').val()===''||$('#pn-owner').val()==null){messages.push('<span class="notice notice-error">شماره تلفن همراه ایجاد کننده تالار سوگ وارد نشده است</span>');}else if(!phoneNumber.test($("#pn-owner").val())){messages.push('<span class="notice notice-error">فرمت شماره تلفن همراه صحیح نیست!</span>')}if($('.soog-persons').length===0){messages.push('<span class="notice notice-error">نام و نام خانوادگی صاحب سوگ وارد نشده است</span>');}if(messages.length>0){e.preventDefault();errorElement.innerHTML=messages.join('<br>');}else{}});$('#add-soog-button').on('click',function(){const nameValidation=/^[\u0600-\u06FF\s]+$/;let addSoog=$(".add-soog-input").val();if(!nameValidation.test($(".add-soog-input").val())){alert('نام و نام خانوادگی صاحب سوگ استاندارد نیست و یا وارد نشده است')}else if($('.soog-persons').length>=10){alert('شما مجاز به نام بردن ۱۰ تن بیشتر نیستید!')}else{$("#add-soog-show").append('<span class="soog-persons">'+addSoog+'<input type="hidden" value="'+addSoog+'" name="owner_name[]"/></span>');$(".add-soog-input").val('')}});$(document).on('click',".soog-persons",function(){$(this).remove();});$(".flex-thi-ul li a.disactive").removeAttr('href');if($(".svg-timer-block").length>0){time_circles_function(false);var setIntervalx=setInterval(function(){time_circles_function(setIntervalx);},60000);}function time_circles_function(setIntervalx){$(".DateCountdown").each(function(){var idel=$(this).attr("id");var d=($(this).attr("d"));var h=parseInt($(this).attr("h"));var i=parseInt($(this).attr("i"));var t=parseInt($(this).attr("t"));if(d>0||h>0||i>0){i=i-1;if(i==0){h=h-1;}if(h==0){d=d-1;}if(d<1&&h<1&&i<1){d=0;h=0;i=0;}$("#"+idel+" .textDiv_Days span").text(d);$("#"+idel+" .textDiv_Hours span").text(h);$("#"+idel+" .textDiv_Minutes span").text(i);const percentageDays=(d/t).toFixed(2);const strokeDashOffsetValueDays=100-(percentageDays*100);const progressBarDays=$("#"+idel+" .js-progress-days");progressBarDays.css("stroke-dashoffset",strokeDashOffsetValueDays);const percentageHours=(h/24).toFixed(1);const strokeDashOffsetValueHours=100-(percentageHours*100);const progressBarHours=$("#"+idel+" .js-progress-hours");progressBarHours.css("stroke-dashoffset",strokeDashOffsetValueHours);const percentageMinutes=(i/60).toFixed(1);const strokeDashOffsetValueMinutes=100-(percentageMinutes*100);const progressBarMinutes=$("#"+idel+" .js-progress-minutes");progressBarMinutes.css("stroke-dashoffset",strokeDashOffsetValueMinutes);if(i==0&&h>0){i=60;}if(h==0&&d>0){h=23;i=60;}$(this).attr("d",d)
$(this).attr("h",h)
$(this).attr("i",i)
if(d<1&&h<1&&i<1){if(setIntervalx){clearInterval(setIntervalx);}}}else{$(".moshahedeh-talar-"+idel).addClass("disactive");$(".davat-"+idel).addClass("disactive");}});}$(".th-toggle").slideUp();$(".th-title.toggle").on('click',function(){$(this).next('.th-toggle').stop().slideToggle();$(this).toggleClass('active');});$('.remove-pop-up').on('click',function(){$('.hamdeli-ok').fadeOut();$('.single-page').removeClass('blur');})
$('.davat').on('click',function(){var sharelink=$(this).attr("data-id");var download_page=$(this).attr("data-d");$(".copy-icon").attr("data-l",sharelink);$(".ld-icon").attr("href","https://www.linkedin.com/sharing/share-offsite/?url="+sharelink);if(_isMobile()){$(".whatsapp-icon").attr("href","whatsapp://send?text="+sharelink);}else{$(".whatsapp-icon").attr("href","https://web.whatsapp.com/send?text="+sharelink);}$(".download-page").attr("href",download_page);$('.hamdeli-ok').fadeIn();})
function _isMobile(){var isMobile=(/iphone|ipod|android|ie|blackberry|fennec/).test(navigator.userAgent.toLowerCase());return isMobile;}$('.remove-pop-up, .tamdid-pop-up button').on('click',function(){$('.tamdid-pop-up').fadeOut();$('.single-page').removeClass('blur');})
$('.tamdid-button').on('click',function(){var price=$(this).attr("data-p");var url=$(this).attr("data-url");$("#tamdid").attr("href",url);$(".ptamdid").text(digits(""+price));$('.tamdid-pop-up').fadeIn();})
$('.textinvitation').keyup(function(){var tlength=$(this).val().length;$(this).val($(this).val().substring(0,1000));var tlength=$(this).val().length;});});